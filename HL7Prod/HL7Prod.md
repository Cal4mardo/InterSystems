# HL7 Production
***
## Database
In this production we will need 2 DBs, one for the RAW HL7 messages, the other for the formatted messages (parsed). The HL7 Version we will use is HL7 VXU - 2.5.1
### DB1 - RAW HL7
#### Create Table
```
CREATE TABLE RAWHL7 (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    HL7_Message VARCHAR(5000)
)
```
#### Insert Sample
```
INSERT INTO RAWHL7 (
    HL7_Message
) VALUES (
    'MSH|^~\&|EPIC|SIISCLIENT818^LINDAS TEST ORGANIZATION|^SIIS||20250416105044||VXU^V04^VXU_V04|225|P|2.5.1||||AL|PID|1||E46700^^^^MR^||DOE^JOHN^C^JR^^^L|SMITH|20140515|M|SMITH^JOHN|2106-3^WHITE^HL70005|115 MAINSTREET^^GOODTOWN^KY^42010^USA^L^010||^PRN^PH^^^270^6009800||EN^ENGLISH^HL70296||||523968712|||2186-5^NOT HISPANIC OR LATINO^HL70012||||||||N|PD1|||||||||||02^Reminder/recall-any method^HL70215|||||A^Active^HL70441|20250416^20250416|NK1|1|DOE^MARY|MTH^MOTHER^HL70063|ORC|RE||9645^SIISCLIENT818||||||20250416111146|2001^HARVEY^MARVIN^K|RXA|0|1|20250416|20250416|20^DTaP^CVX^90700^DTAP^CPT|.5|ML^mL^ISO+ ||00^New immunization record^NIP001|JONES^MARK|^^^SIISCLIENT818||||A7894-2|20261115|PMC^SANOFI PASTEUR^MVX||||A|RXR|ID^INTRADERMAL^HL70162|LD^LEFT|OBX|1|CE|64994-7^VACCINE FUNDING PROGRAM ELIGIBILITY CATEGORY^LN|1|V02^MEDICAID^HL70064||||||F|||20250416|||VXC40^ELIGIBILITY CAPTURED AT THE IMMUNIZATION LEVEL^CDCPHINVS'
)
```
### DB2 - Formatted HL7
#### Create Table
```
CREATE TABLE FormattedHL7 (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    MSH_Segment VARCHAR(255),
    PID_Segment VARCHAR(255),
    PD1_Segment VARCHAR(255),
    NK1_Segment VARCHAR(255),
    ORC_Segment VARCHAR(255),
    RXA_Segment VARCHAR(255),
    RXR_Segment VARCHAR(255),
    OBX_Segment VARCHAR(255)
)
```
#### Insert Sample
```
INSERT INTO FormattedHL7 (
    MSH_Segment,
    PID_Segment,
    PD1_Segment,
    NK1_Segment,
    ORC_Segment,
    RXA_Segment,
    RXR_Segment,
    OBX_Segment
) VALUES (
    'MSH|^~\&|EPIC|SIISCLIENT818^LINDAS TEST ORGANIZATION|^SIIS||20250416105044||VXU^V04^VXU_V04|225|P|2.5.1||||AL',
    'PID|1||E46700^^^^MR^||DOE^JOHN^C^JR^^^L|SMITH|20140515|M|SMITH^JOHN|2106-3^WHITE^HL70005|115 MAINSTREET^^GOODTOWN^KY^42010^USA^L^010||^PRN^PH^^^270^6009800||EN^ENGLISH^HL70296||||523968712|||2186-5^NOT HISPANIC OR LATINO^HL70012||||||||N',
    'PD1|||||||||||02^Reminder/recall-any method^HL70215|||||A^Active^HL70441|20250416^20250416',
    'NK1|1|DOE^MARY|MTH^MOTHER^HL70063',
    'ORC|RE||9645^SIISCLIENT818||||||20250416111146|2001^HARVEY^MARVIN^K',
    'RXA|0|1|20250416|20250416|20^DTaP^CVX^90700^DTAP^CPT|.5|ML^mL^ISO+ ||00^New immunization record^NIP001|JONES^MARK|^^^SIISCLIENT818||||A7894-2|20261115|PMC^SANOFI PASTEUR^MVX||||A',
    'RXR|ID^INTRADERMAL^HL70162|LD^LEFT',
    'OBX|1|CE|64994-7^VACCINE FUNDING PROGRAM ELIGIBILITY CATEGORY^LN|1|V02^MEDICAID^HL70064||||||F|||20250416|||VXC40^ELIGIBILITY CAPTURED AT THE IMMUNIZATION LEVEL^CDCPHINVS'
)
```